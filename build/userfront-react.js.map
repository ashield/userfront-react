{"version":3,"file":"userfront-react.js","sources":["../src/index.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport ReactDom from \"react-dom\";\n// import core from \"./core.map.js\";\nimport core from \"@anymod/core\";\n\nconst {\n  Singleton,\n  alias,\n  processPage,\n  createOrReturnPage,\n  checkPageAndUpdate,\n  executeCallbacks,\n  logErrorsAndTips,\n  uncloakNonMods,\n} = core;\n\nasync function mount() {\n  try {\n    const page = await createOrReturnPage();\n    const updatedPage = await checkPageAndUpdate(page);\n    await processPage(updatedPage);\n    executeCallbacks();\n    logErrorsAndTips();\n    setTimeout(uncloakNonMods, 1);\n  } catch (err) {\n    let message = err && err.message ? err.message : \"Problem loading page\";\n    console.warn(message, err);\n    uncloakNonMods();\n  }\n}\n\nconst Toolkit = {\n  signupForm({ tenantId, toolId }) {\n    alias.setAlias(\"Userfront\");\n    Singleton.Opts.api = true;\n    return function Signup() {\n      useEffect(() => {\n        mount();\n      });\n      return (\n        <div>\n          <div id={`userfront-${toolId}`}></div>;\n        </div>\n      );\n    };\n  },\n};\n\nexport default Toolkit;\n"],"names":["Singleton","alias","processPage","createOrReturnPage","checkPageAndUpdate","executeCallbacks","logErrorsAndTips","uncloakNonMods","core","signupForm","toolId","setAlias","Opts","api","useEffect","body","recover","result","page","updatedPage","setTimeout","e","then","err","console","warn","message","mount","React","id"],"mappings":"gKAKMA,UACJA,EADIC,MAEJA,EAFIC,YAGJA,EAHIC,mBAIJA,EAJIC,mBAKJA,EALIC,iBAMJA,EANIC,iBAOJA,EAPIC,eAQJA,GACEC,iBAiBY,CACdC,WAAU,EAACC,OAAYA,MACrBT,EAAMU,SAAS,aACfX,EAAUY,KAAKC,KAAM,aAKnB,OAHAC,YAAU,6BA8gBT,SAAgBC,EAAMC,GAC5B,IACC,IAAIC,kBAliBiBd,mBAAbe,0BACoBd,EAAmBc,kBAAvCC,0BACAjB,EAAYiB,oBAClBd,IACAC,IACAc,WAAWb,EAAgB,SA8hB5B,MAAMc,GACP,OAAOL,EAAQK,GAEhB,OAAIJ,GAAUA,EAAOK,KACbL,EAAOK,UAAK,EAAQN,GAErBC,cAniBGM,GAEPC,QAAQC,KADMF,GAAOA,EAAIG,QAAUH,EAAIG,QAAU,uBAC3BH,GACtBhB,gGAUIoB,KAGAC,2BACEA,uBAAKC,GAAK,aAAYnB"}